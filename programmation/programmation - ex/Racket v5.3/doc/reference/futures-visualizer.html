<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>10.5&nbsp;Futures Visualizer</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="extras.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x"><span style="font-weight: bold">The Racket Reference</span></a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="model.html" class="tocviewlink" pltdoc="x">Language Model</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="syntax.html" class="tocviewlink" pltdoc="x">Syntactic Forms</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="data.html" class="tocviewlink" pltdoc="x">Datatypes</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="structures.html" class="tocviewlink" pltdoc="x">Structures</a></td></tr><tr><td align="right">5&nbsp;</td><td><a href="mzlib_class.html" class="tocviewlink" pltdoc="x">Classes and Objects</a></td></tr><tr><td align="right">6&nbsp;</td><td><a href="mzlib_unit.html" class="tocviewlink" pltdoc="x">Units</a></td></tr><tr><td align="right">7&nbsp;</td><td><a href="contracts.html" class="tocviewlink" pltdoc="x">Contracts</a></td></tr><tr><td align="right">8&nbsp;</td><td><a href="match.html" class="tocviewlink" pltdoc="x">Pattern Matching</a></td></tr><tr><td align="right">9&nbsp;</td><td><a href="control.html" class="tocviewlink" pltdoc="x">Control Flow</a></td></tr><tr><td align="right">10&nbsp;</td><td><a href="concurrency.html" class="tocviewselflink" pltdoc="x">Concurrency and Parallelism</a></td></tr><tr><td align="right">11&nbsp;</td><td><a href="Macros.html" class="tocviewlink" pltdoc="x">Macros</a></td></tr><tr><td align="right">12&nbsp;</td><td><a href="input-and-output.html" class="tocviewlink" pltdoc="x">Input and Output</a></td></tr><tr><td align="right">13&nbsp;</td><td><a href="security.html" class="tocviewlink" pltdoc="x">Reflection and Security</a></td></tr><tr><td align="right">14&nbsp;</td><td><a href="os.html" class="tocviewlink" pltdoc="x">Operating System</a></td></tr><tr><td align="right">15&nbsp;</td><td><a href="memory.html" class="tocviewlink" pltdoc="x">Memory Management</a></td></tr><tr><td align="right">16&nbsp;</td><td><a href="unsafe.html" class="tocviewlink" pltdoc="x">Unsafe Operations</a></td></tr><tr><td align="right">17&nbsp;</td><td><a href="running.html" class="tocviewlink" pltdoc="x">Running Racket</a></td></tr><tr><td align="right"></td><td><a href="doc-bibliography.html" class="tocviewlink" pltdoc="x">Bibliography</a></td></tr><tr><td align="right"></td><td><a href="doc-index.html" class="tocviewlink" pltdoc="x">Index</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>10&nbsp;</td><td><a href="concurrency.html" class="tocviewlink" pltdoc="x">Concurrency and Parallelism</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.1&nbsp;</td><td><a href="threads.html" class="tocviewlink" pltdoc="x">Threads</a></td></tr><tr><td align="right">10.2&nbsp;</td><td><a href="all-sync.html" class="tocviewlink" pltdoc="x">Synchronization</a></td></tr><tr><td align="right">10.3&nbsp;</td><td><a href="thread-local-storage.html" class="tocviewlink" pltdoc="x">Thread-<wbr></wbr>Local Storage</a></td></tr><tr><td align="right">10.4&nbsp;</td><td><a href="futures.html" class="tocviewlink" pltdoc="x">Futures</a></td></tr><tr><td align="right">10.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Futures Visualizer</a></td></tr><tr><td align="right">10.6&nbsp;</td><td><a href="futures-trace.html" class="tocviewlink" pltdoc="x">Futures Tracing</a></td></tr><tr><td align="right">10.7&nbsp;</td><td><a href="places.html" class="tocviewlink" pltdoc="x">Places</a></td></tr><tr><td align="right">10.8&nbsp;</td><td><a href="distributed-places.html" class="tocviewlink" pltdoc="x">Distributed Places</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>10.5&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Futures Visualizer</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">10.5.1&nbsp;</td><td><a href="#(part._future-visualizer-timeline)" class="tocviewlink" pltdoc="x">Execution Timeline</a></td></tr><tr><td align="right">10.5.2&nbsp;</td><td><a href="#(part._future-visualizer-tree)" class="tocviewlink" pltdoc="x">Future Creation Tree</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><a href="#(form._((lib._future-visualizer/main..rkt)._visualize-futures))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: future-visualizer"><span class="RktSym">visualize-<wbr></wbr>futures</span></span></a></td></tr><tr><td><a href="#(def._((lib._future-visualizer/main..rkt)._visualize-futures-thunk))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: future-visualizer"><span class="RktSym">visualize-<wbr></wbr>futures-<wbr></wbr>thunk</span></span></a></td></tr><tr><td><a href="#(def._((lib._future-visualizer/main..rkt)._show-visualizer))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: future-visualizer"><span class="RktSym">show-<wbr></wbr>visualizer</span></span></a></td></tr><tr><td><span class="tocsublinknumber">10.5.1<tt>&nbsp;</tt></span><a href="#(part._future-visualizer-timeline)" class="tocsubseclink" pltdoc="x">Execution Timeline</a></td></tr><tr><td><a href="#(def._((lib._future-visualizer/main..rkt)._timeline-pict))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: future-visualizer"><span class="RktSym">timeline-<wbr></wbr>pict</span></span></a></td></tr><tr><td><span class="tocsublinknumber">10.5.2<tt>&nbsp;</tt></span><a href="#(part._future-visualizer-tree)" class="tocsubseclink" pltdoc="x">Future Creation Tree</a></td></tr><tr><td><a href="#(def._((lib._future-visualizer/main..rkt)._creation-tree-pict))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: future-visualizer"><span class="RktSym">creation-<wbr></wbr>tree-<wbr></wbr>pict</span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3&quot;);">top</a></span><span class="navright"><a href="futures.html" title="backward to &quot;10.4 Futures&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="futures-trace.html" title="forward to &quot;10.6 Futures Tracing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>10.5<tt>&nbsp;</tt><a name="(part._futures-visualizer)"></a><a name="(mod-path._future-visualizer)"></a>Futures Visualizer</h4><blockquote class="refpara"><blockquote class="refcolumn"><blockquote class="refcontent"><p><span class="imageleft"><img src="finger.png" alt="+" /></span><a href="../guide/performance.html#(part._effective-futures)" pltdoc="x">Parallelism with Futures</a> in <a href="../guide/index.html" pltdoc="x"><span style="font-weight: bold">The Racket Guide</span></a> introduces the future visualizer.</p></blockquote></blockquote></blockquote><p><table cellspacing="0" class="defmodule"><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="stt"> </span><a href="" class="RktModLink" pltdoc="x"><span class="RktSym">future-visualizer</span></a><span class="RktPn">)</span></td></tr></table></p><p>The <a name="(tech._futures._visualizer)"></a><span style="font-style: italic">futures visualizer</span> is a graphical profiling tool
for parallel programs written using <span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._future))" class="RktValLink" pltdoc="x">future</a></span>.  The tool
shows a timeline of a program&rsquo;s execution including all future-related
events, as well as the overall amount of processor utilization
at any point during the program&rsquo;s lifetime.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><table cellspacing="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(form._((lib._future-visualizer/main..rkt)._visualize-futures))"></a><span title="Provided from: future-visualizer"><span class="RktSym">visualize-futures</span></span><span class="hspace">&nbsp;</span><span class="RktVar">e</span><span class="hspace">&nbsp;</span><span class="RktMeta">...</span><span class="RktPn">)</span></p></blockquote></td></tr></table></td></tr><tr><td><table cellspacing="0" class="together"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._future-visualizer/main..rkt)._visualize-futures-thunk))"></a><span title="Provided from: future-visualizer"><span class="RktSym">visualize-futures-thunk</span></span><span class="hspace">&nbsp;</span><span class="RktVar">thunk</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">thunk</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="data-structure-contracts.html#(form._((lib._racket/contract/private/misc..rkt)._any))" class="RktStxLink" pltdoc="x">any</a></span><span class="RktPn">)</span></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">The <span class="RktSym">visualize-futures</span> macro enables the collection
of data required by the visualizer and displays a profiler
window showing the corresponding trace.  The <span class="RktSym">visualize-futures-thunk</span>
provides similar functionality where program code is contained
within <span class="RktVar">thunk</span>.</div></p><p>A typical program using profiling might look like the following:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/future</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">future-visualizer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">visualize-futures</span></td></tr><tr><td><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._future))" class="RktValLink" pltdoc="x">future</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._touch))" class="RktValLink" pltdoc="x">touch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote><p>The preceding program is equivalent to:</p><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">racket/future</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">future-visualizer/trace</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">future-visualizer</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._start-future-tracing!))" class="RktValLink" pltdoc="x">start-future-tracing!</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let))" class="RktStxLink" pltdoc="x">let</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._future))" class="RktValLink" pltdoc="x">future</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="lambda.html#(form._((lib._racket/private/base..rkt)._lambda))" class="RktStxLink" pltdoc="x">lambda</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym"><a href="stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt)._......))" class="RktStxLink" pltdoc="x">...</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="futures.html#(def._((lib._racket/future..rkt)._touch))" class="RktValLink" pltdoc="x">touch</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._stop-future-tracing!))" class="RktValLink" pltdoc="x">stop-future-tracing!</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym">show-visualizer</span><span class="RktPn">)</span></td></tr></table></blockquote><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._future-visualizer/main..rkt)._show-visualizer))"></a><span title="Provided from: future-visualizer"><span class="RktSym">show-visualizer</span></span><span class="hspace">&nbsp;</span><span class="RktPn">#:timeline</span><span class="hspace">&nbsp;</span><span class="RktVar">timeline</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="void.html#(def._((quote._~23~25kernel)._void~3f))" class="RktValLink" pltdoc="x">void?</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">timeline</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._indexed-future-event~3f))" class="RktValLink" pltdoc="x">indexed-future-event?</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Displays the visualizer window.  If the function is called with no arguments,
it must be preceded by the following sequence: a call to <span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._start-future-tracing!))" class="RktValLink" pltdoc="x">start-future-tracing!</a></span>,
program code that is being traced, and a call to <span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._stop-future-tracing!))" class="RktValLink" pltdoc="x">stop-future-tracing!</a></span> &ndash; in which case
the visualizer will show data for all events logged in between those calls (via <span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._timeline-events))" class="RktValLink" pltdoc="x">timeline-events</a></span>).
Note that <span class="RktSym">visualize-futures</span> and <span class="RktSym">visualize-futures-thunk</span> are simpler alternatives to using these
primitives directly.
The <span class="RktVar">timeline</span> argument can be used to show the visualizer for a previously-generated
trace.</div></p><h5>10.5.1<tt>&nbsp;</tt><a name="(part._future-visualizer-timeline)"></a>Execution Timeline</h5><p>The <a name="(tech._execution._timeline)"></a><span style="font-style: italic">execution timeline</span>, shown in the top left-hand corner of the
profiler window, displays a history of the program
and all events associated with its futures, with OS-level threads
or <a name="(tech._processe)"></a><span style="font-style: italic">processes</span> organized along the y-axis and time increasing along
the x-axis.  A coloring convention is used to distinguish between
different types of events (see <a href="futures-trace.html#(part._future-logging)" pltdoc="x">Future Performance Logging</a> for a full
description of these event types):</p><ul><li><p>Blue dot: <span class="RktVal">'</span><span class="RktVal">create</span></p></li><li><p>Green bar: <span class="RktVal">'</span><span class="RktVal">start-work</span>, <span class="RktVal">'</span><span class="RktVal">start-0-work</span></p></li><li><p>Orange dot: <span class="RktVal">'</span><span class="RktVal">sync</span></p></li><li><p>Red dot: <span class="RktVal">'</span><span class="RktVal">block</span>, <span class="RktVal">'</span><span class="RktVal">touch</span></p></li><li><p>White dot: <span class="RktVal">'</span><span class="RktVal">result</span>, <span class="RktVal">'</span><span class="RktVal">end-work</span></p></li><li><p>Green dot: <span class="RktVal">'</span><span class="RktVal">touch-pause</span>, <span class="RktVal">'</span><span class="RktVal">touch-resume</span></p></li></ul><p>Mousing over any event connects it via purple lines to the sequence
of events for its future.  Additionally, orange dotted lines
with arrowheads may be shown to indicate operations performed from
one future to another (e.g. <span class="RktVal">'</span><span class="RktVal">create</span> or <span class="RktVal">'</span><span class="RktVal">touch</span> actions).
To view details about two events simultaneously, a selection
can be tacked by clicking the mouse.</p><p>The timeline displays vertical lines at 100-microsecond intervals.  Note that
though the time interval is fixed, the pixel distance between lines varies
based on the event density for any given time range to prevent overlapping
event circles.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._future-visualizer/main..rkt)._timeline-pict))"></a><span title="Provided from: future-visualizer"><span class="RktSym">timeline-pict</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">events</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:x</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:y</span><span class="hspace">&nbsp;</span><span class="RktVar">y</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:width</span><span class="hspace">&nbsp;</span><span class="RktVar">width</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:height</span><span class="hspace">&nbsp;</span><span class="RktVar">height</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:selected-event-index</span><span class="hspace">&nbsp;</span><span class="RktVar">selected-event-index</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym">pict?</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">events</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._indexed-future-event~3f))" class="RktValLink" pltdoc="x">indexed-future-event?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">selected-event-index</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <span class="RktSym">pict</span> showing the execution timeline for the trace in <span class="RktVar">events</span>.  The optional
arguments <span class="RktVar">x</span>, <span class="RktVar">y</span>, <span class="RktVar">width</span>, and <span class="RktVar">height</span> can be used to obtain a specific
area (in pixels) of the timeline image.  The <span class="RktVar">selected-event-index</span> argument, if specified, shows
the timeline image as if the user placed the mouse pointer over the <span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._indexed-future-event))" class="RktValLink" pltdoc="x">indexed-future-event</a></span> with
the corresponding index.</div></p><h5>10.5.2<tt>&nbsp;</tt><a name="(part._future-visualizer-tree)"></a>Future Creation Tree</h5><p>The <a name="(tech._creation._tree)"></a><span style="font-style: italic">creation tree</span> shows a tree with a single node per
future created by the program.  This display can be particularly useful
for programs which spawn futures in nested fashion (futures within futures).
For any given future node, the children
of that node represent futures which were created by that future (within
the scope of its thunk).  For all programs, the root of the tree
is a special node representing the main computation thread (the runtime thread),
and is denoted <a name="(tech._rtt)"></a><span style="font-style: italic">RTT</span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._future-visualizer/main..rkt)._creation-tree-pict))"></a><span title="Provided from: future-visualizer"><span class="RktSym">creation-tree-pict</span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">events</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span>[</td><td><span class="RktPn">#:x</span><span class="hspace">&nbsp;</span><span class="RktVar">x</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:y</span><span class="hspace">&nbsp;</span><span class="RktVar">y</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:width</span><span class="hspace">&nbsp;</span><span class="RktVar">width</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:node-width</span><span class="hspace">&nbsp;</span><span class="RktVar">node-width</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:height</span><span class="hspace">&nbsp;</span><span class="RktVar">height</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:padding</span><span class="hspace">&nbsp;</span><span class="RktVar">padding</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktPn">#:zoom</span><span class="hspace">&nbsp;</span><span class="RktVar">zoom</span>]<span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym">pict?</span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">events</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="data-structure-contracts.html#(def._((lib._racket/contract/private/misc..rkt)._listof))" class="RktValLink" pltdoc="x">listof</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="futures-trace.html#(def._((lib._future-visualizer/trace..rkt)._indexed-future-event~3f))" class="RktValLink" pltdoc="x">indexed-future-event?</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">node-width</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">height</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">padding</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="if.html#(form._((lib._racket/private/letstx-scheme..rkt)._or))" class="RktStxLink" pltdoc="x">or</a></span><span class="hspace">&nbsp;</span><span class="RktVal">#f</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">#f</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">zoom</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="number-types.html#(def._((quote._~23~25kernel)._exact-nonnegative-integer~3f))" class="RktValLink" pltdoc="x">exact-nonnegative-integer?</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">1</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a <span class="RktSym">pict</span> showing the future creation tree for the trace in <span class="RktVar">events</span>.  The optional
arguments <span class="RktVar">x</span>, <span class="RktVar">y</span>, <span class="RktVar">width</span>, and <span class="RktVar">height</span> can be used to obtain a specific
area (in pixels) of the creation tree image.  The <span class="RktVar">node-width</span> argument
specifies (in pixels) the diameter of each node.  The <span class="RktVar">padding</span> argument specifies the minimum space vertically
between each depth and horizontally between siblings.  The <span class="RktVar">zoom</span> argument specifies the zoom factor for the
tree image in the range 1-5, where 5 returns a 500% zoom.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3&quot;);">top</a></span><span class="navright"><a href="futures.html" title="backward to &quot;10.4 Futures&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="concurrency.html" title="up to &quot;10 Concurrency and Parallelism&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="futures-trace.html" title="forward to &quot;10.6 Futures Tracing&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>