<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html><head><meta http-equiv="content-type" content="text-html; charset=utf-8" /><title>4.10&nbsp;Spatial Transformations</title><link rel="stylesheet" type="text/css" href="../scribble.css" title="default" /><link rel="stylesheet" type="text/css" href="../racket.css" title="default" /><link rel="stylesheet" type="text/css" href="../scribble-style.css" title="default" /><script type="text/javascript" src="../scribble-common.js"></script><!--[if IE 6]><style type="text/css">.SIEHidden { overflow: hidden; }</style><![endif]--></head><body id="doc-racket-lang-org"><div class="tocset"><div class="tocview"><div class="tocviewlist" style="margin-bottom: 1em;"><div class="tocviewtitle"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_0&quot;);">&#9658;</a></td><td></td><td><a href="index.html" class="tocviewlink" pltdoc="x">Images</a></td></tr></table></div><div class="tocviewsublisttop" style="display: none;" id="tocview_0"><table cellspacing="0" cellpadding="0"><tr><td align="right">1&nbsp;</td><td><a href="Icons.html" class="tocviewlink" pltdoc="x">Icons</a></td></tr><tr><td align="right">2&nbsp;</td><td><a href="Logos.html" class="tocviewlink" pltdoc="x">Logos</a></td></tr><tr><td align="right">3&nbsp;</td><td><a href="Embedding_Bitmaps_in_Compiled_Files.html" class="tocviewlink" pltdoc="x">Embedding Bitmaps in Compiled Files</a></td></tr><tr><td align="right">4&nbsp;</td><td><a href="flomap_title.html" class="tocviewselflink" pltdoc="x">Floating-<wbr></wbr>Point Bitmaps</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_1&quot;);">&#9660;</a></td><td>4&nbsp;</td><td><a href="flomap_title.html" class="tocviewlink" pltdoc="x">Floating-<wbr></wbr>Point Bitmaps</a></td></tr></table><div class="tocviewsublist" style="display: block;" id="tocview_1"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.1&nbsp;</td><td><a href="Overview.html" class="tocviewlink" pltdoc="x">Overview</a></td></tr><tr><td align="right">4.2&nbsp;</td><td><a href="Struct_Type_and_Accessors.html" class="tocviewlink" pltdoc="x">Struct Type and Accessors</a></td></tr><tr><td align="right">4.3&nbsp;</td><td><a href="Conversion_and_Construction.html" class="tocviewlink" pltdoc="x">Conversion and Construction</a></td></tr><tr><td align="right">4.4&nbsp;</td><td><a href="Component_Operations.html" class="tocviewlink" pltdoc="x">Component Operations</a></td></tr><tr><td align="right">4.5&nbsp;</td><td><a href="Pointwise_Operations.html" class="tocviewlink" pltdoc="x">Pointwise Operations</a></td></tr><tr><td align="right">4.6&nbsp;</td><td><a href="Gradients_and_Normals.html" class="tocviewlink" pltdoc="x">Gradients and Normals</a></td></tr><tr><td align="right">4.7&nbsp;</td><td><a href="Blur.html" class="tocviewlink" pltdoc="x">Blur</a></td></tr><tr><td align="right">4.8&nbsp;</td><td><a href="Resizing.html" class="tocviewlink" pltdoc="x">Resizing</a></td></tr><tr><td align="right">4.9&nbsp;</td><td><a href="Compositing.html" class="tocviewlink" pltdoc="x">Compositing</a></td></tr><tr><td align="right">4.10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Spatial Transformations</a></td></tr><tr><td align="right">4.11&nbsp;</td><td><a href="Effects.html" class="tocviewlink" pltdoc="x">Effects</a></td></tr></table></div></div><div class="tocviewlist"><table cellspacing="0" cellpadding="0"><tr><td style="width: 1em;"><a href="javascript:void(0);" title="Expand/Collapse" class="tocviewtoggle" onclick="TocviewToggle(this,&quot;tocview_2&quot;);">&#9658;</a></td><td>4.10&nbsp;</td><td><a href="" class="tocviewselflink" pltdoc="x">Spatial Transformations</a></td></tr></table><div class="tocviewsublistbottom" style="display: none;" id="tocview_2"><table cellspacing="0" cellpadding="0"><tr><td align="right">4.10.1&nbsp;</td><td><a href="#(part._.Provided_.Transformations)" class="tocviewlink" pltdoc="x">Provided Transformations</a></td></tr><tr><td align="right">4.10.2&nbsp;</td><td><a href="#(part._.General_.Transformations)" class="tocviewlink" pltdoc="x">General Transformations</a></td></tr><tr><td align="right">4.10.3&nbsp;</td><td><a href="#(part._.Lens_.Projection_and_.Correction)" class="tocviewlink" pltdoc="x">Lens Projection and Correction</a></td></tr></table></div></div></div><div class="tocsub"><div class="tocsubtitle">On this page:</div><table class="tocsublist" cellspacing="0"><tr><td><span class="tocsublinknumber">4.10.1<tt>&nbsp;</tt></span><a href="#(part._.Provided_.Transformations)" class="tocsubseclink" pltdoc="x">Provided Transformations</a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>flip-<wbr></wbr>horizontal</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-vertical))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>flip-<wbr></wbr>vertical</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-transpose))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>transpose</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-cw-rotate))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>cw-<wbr></wbr>rotate</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-ccw-rotate))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>ccw-<wbr></wbr>rotate</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>rotate</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>rotate-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>whirl-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-fisheye-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>fisheye-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-scale-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>scale-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-id-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>id-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.10.2<tt>&nbsp;</tt></span><a href="#(part._.General_.Transformations)" class="tocsubseclink" pltdoc="x">General Transformations</a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktStxLink">Flomap-<wbr></wbr>Transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>2d-<wbr></wbr>mapping</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">make-<wbr></wbr>flomap-<wbr></wbr>2d-<wbr></wbr>mapping</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>transform-<wbr></wbr>compose</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>transform-<wbr></wbr>bounds</span></span></span></a></td></tr><tr><td><span class="tocsublinknumber">4.10.3<tt>&nbsp;</tt></span><a href="#(part._.Lens_.Projection_and_.Correction)" class="tocsubseclink" pltdoc="x">Lens Projection and Correction</a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">flomap-<wbr></wbr>projection-<wbr></wbr>transform</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">perspective-<wbr></wbr>projection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._linear-projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">linear-<wbr></wbr>projection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._orthographic-projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">orthographic-<wbr></wbr>projection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">equal-<wbr></wbr>area-<wbr></wbr>projection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._stereographic-projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">stereographic-<wbr></wbr>projection</span></span></span></a></td></tr><tr><td><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktStxLink">Projection</span></span></span></a></td></tr><tr><td><a href="#(def._((lib._images/flomap..rkt)._projection-mapping))" class="tocsubnonseclink" pltdoc="x"><span title="Provided from: images/flomap"><span class="RktSym"><span class="RktValLink">projection-<wbr></wbr>mapping</span></span></span></a></td></tr></table></div></div><div class="maincolumn"><div class="main"><div class="navsettop"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3&quot;);">top</a></span><span class="navright"><a href="Compositing.html" title="backward to &quot;4.9 Compositing&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="flomap_title.html" title="up to &quot;4 Floating-Point Bitmaps&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Effects.html" title="forward to &quot;4.11 Effects&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div><h4>4.10<tt>&nbsp;</tt><a name="(part._.Spatial_.Transformations)"></a>Spatial Transformations</h4><p>This section gives the API for applying spatial transforms to a flomap, such as rotations, warps, morphs, and lens distortion effects.</p><p>To use the provided transforms, apply a function like <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))" class="RktValLink" pltdoc="x">flomap-flip-horizontal</a></span> directly,
or apply something like a <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span> to a flomap using <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span>.</p><p><div class="SIntrapara">To make your own transforms, compose existing ones with <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span>, or construct a value of type <span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span> directly:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym">:</span><span class="hspace">&nbsp;</span><span class="RktSym">my-awesome-transform</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">my-awesome-transform</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))" class="RktValLink" pltdoc="x">make-flomap-2d-mapping</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktSym">inv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Here, <span class="RktSym">fun</span> is a mapping from input coordinates to output coordinates and <span class="RktSym">inv</span> is its inverse.</div></p><p><div class="SIntrapara">Contents:
</div><div class="SIntrapara"><table cellspacing="0"><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Provided_.Transformations)" class="toclink" pltdoc="x">4.10.1<span class="hspace">&nbsp;</span>Provided Transformations</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.General_.Transformations)" class="toclink" pltdoc="x">4.10.2<span class="hspace">&nbsp;</span>General Transformations</a></p></td></tr><tr><td><p><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><a href="#(part._.Lens_.Projection_and_.Correction)" class="toclink" pltdoc="x">4.10.3<span class="hspace">&nbsp;</span>Lens Projection and Correction</a></p></td></tr></table></div></p><h5>4.10.1<tt>&nbsp;</tt><a name="(part._.Provided_.Transformations)"></a>Provided Transformations</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))" class="RktValLink" pltdoc="x">flomap-flip-horizontal</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-flip-vertical))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-vertical))" class="RktValLink" pltdoc="x">flomap-flip-vertical</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-transpose))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transpose))" class="RktValLink" pltdoc="x">flomap-transpose</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-cw-rotate))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-cw-rotate))" class="RktValLink" pltdoc="x">flomap-cw-rotate</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-ccw-rotate))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-ccw-rotate))" class="RktValLink" pltdoc="x">flomap-ccw-rotate</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Some standard image transforms.
These are lossless, in that repeated applications do not degrade (blur or alias) the image.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/require.html#(form._((lib._racket/private/base..rkt)._require))" class="RktStxLink" pltdoc="x">require</a></span><span class="hspace">&nbsp;</span><span class="RktSym">slideshow/pict</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Resizing.html#(def._((lib._images/flomap..rkt)._flomap-trim))" class="RktValLink" pltdoc="x">flomap-trim</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._bitmap-~3eflomap))" class="RktValLink" pltdoc="x">bitmap-&gt;flomap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../slideshow/Rendering.html#(def._((lib._slideshow/pict..rkt)._pict-~3ebitmap))" class="RktValLink" pltdoc="x">pict-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../slideshow/Pict_Combiners.html#(def._((lib._slideshow/pict..rkt)._vc-append))" class="RktValLink" pltdoc="x">vc-append</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../slideshow/Basic_Pict_Constructors.html#(def._((lib._slideshow/pict..rkt)._text))" class="RktValLink" pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"We CLAIM the"</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">bold</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">25</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../slideshow/Basic_Pict_Constructors.html#(def._((lib._slideshow/pict..rkt)._text))" class="RktValLink" pltdoc="x">text</a></span><span class="hspace">&nbsp;</span><span class="RktVal">"PRIVILEGE"</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">(</span><span class="RktVal">bold</span><span class="RktVal">)</span><span class="hspace">&nbsp;</span><span class="RktVal">25</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_168.png" alt="image" width="195" height="49" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))" class="RktValLink" pltdoc="x">flomap-flip-horizontal</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_169.png" alt="image" width="195" height="49" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-vertical))" class="RktValLink" pltdoc="x">flomap-flip-vertical</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_170.png" alt="image" width="195" height="49" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transpose))" class="RktValLink" pltdoc="x">flomap-transpose</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_171.png" alt="image" width="49" height="195" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-cw-rotate))" class="RktValLink" pltdoc="x">flomap-cw-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_172.png" alt="image" width="49" height="195" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-ccw-rotate))" class="RktValLink" pltdoc="x">flomap-ccw-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_173.png" alt="image" width="49" height="195" /></p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-cw-rotate))" class="RktValLink" pltdoc="x">flomap-cw-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-vertical))" class="RktValLink" pltdoc="x">flomap-flip-vertical</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transpose))" class="RktValLink" pltdoc="x">flomap-transpose</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/booleans.html#(def._((quote._~23~25kernel)._equal~3f))" class="RktValLink" pltdoc="x">equal?</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-ccw-rotate))" class="RktValLink" pltdoc="x">flomap-ccw-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-flip-horizontal))" class="RktValLink" pltdoc="x">flomap-flip-horizontal</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transpose))" class="RktValLink" pltdoc="x">flomap-transpose</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><span class="RktRes">#t</span></p></td></tr></table></blockquote></td></tr></table></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-rotate))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span><span class="RktVar">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#952;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap rotated by <span class="RktVar">&#952;</span> radians counterclockwise.
Equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="stt"> </span><span class="RktVar">fm</span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="stt"> </span><span class="RktVar">&#952;</span><span class="RktPn">)</span><span class="RktPn">)</span>.
</div><div class="SIntrapara"><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/4</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_174.png" alt="image" width="173" height="173" /></p></td></tr></table></blockquote></td></tr></table></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-rotate-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#952;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap transform that rotates a flomap <span class="RktVar">&#952;</span> radians counterclockwise around its (<span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>-valued) center.</div></p><p>Use <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span> if you need to know the bounds of the rotated flomap or need to compose a rotation with another transform using <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span>.</p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Examples:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/4</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">100</span><span class="hspace">&nbsp;</span><span class="RktVal">100</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td><p><span class="RktRes">-21</span></p></td></tr><tr><td><p><span class="RktRes">-21</span></p></td></tr><tr><td><p><span class="RktRes">121</span></p></td></tr><tr><td><p><span class="RktRes">121</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/4</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_174.png" alt="image" width="173" height="173" /></p></td></tr></table></blockquote></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-whirl-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#952;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap transform that &ldquo;whirls&rdquo; a flomap: rotates it counterclockwise <span class="RktVar">&#952;</span> radians in the center, and rotates less with more distance from the center.</div></p><p>This transform does not alter the size of its input.</p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_175.png" alt="image" width="195" height="49" /></p></td></tr></table></blockquote></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-fisheye-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-fisheye-transform))" class="RktValLink" pltdoc="x">flomap-fisheye-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap transform that simulates &ldquo;fisheye&rdquo; lens distortion with an <span class="RktVar">&#945;</span> diagonal angle of view.
Equivalent to
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="RktValLink" pltdoc="x">equal-area-projection</a></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr></table></blockquote></div></p><p><table cellspacing="0" class="RktBlk"><tr><td><p>Example:</p></td></tr><tr><td><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-fisheye-transform))" class="RktValLink" pltdoc="x">flomap-fisheye-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2/3</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_176.png" alt="image" width="199" height="79" /></p></td></tr></table></blockquote></td></tr></table></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-scale-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-scale-transform))" class="RktValLink" pltdoc="x">flomap-scale-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">x-scale</span><span class="hspace">&nbsp;</span>[<span class="RktVar">y-scale</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x-scale</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y-scale</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVar">x-scale</span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap transform that scales flomaps by <span class="RktVar">x-scale</span> horizontally and <span class="RktVar">y-scale</span> vertically.</div></p><p>You should generally prefer to use <span class="RktSym"><a href="Resizing.html#(def._((lib._images/flomap..rkt)._flomap-scale))" class="RktValLink" pltdoc="x">flomap-scale</a></span>, which is faster and correctly reduces resolution before downsampling to avoid aliasing.
This is provided for composition with other transforms using <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>value</p></div></div><p class="RForeground"><a name="(def._((lib._images/flomap..rkt)._flomap-id-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-id-transform))" class="RktValLink" pltdoc="x">flomap-id-transform</a></span></span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">A flomap transform that does nothing.
See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span> for an example of using <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-id-transform))" class="RktValLink" pltdoc="x">flomap-id-transform</a></span> as the initial value for a fold.</div></p><h5>4.10.2<tt>&nbsp;</tt><a name="(part._.General_.Transformations)"></a>General Transformations</h5><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr><tr><td><table cellspacing="0" class="prototype"><tr><td><span class="RktPn">(</span><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">fm</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">t</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">x-start</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">y-start</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">x-end</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">y-end</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr></table></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap))" class="RktValLink" pltdoc="x">flomap</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x-start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y-start</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">x-end</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">y-end</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Applies spatial transform <span class="RktVar">t</span> to <span class="RktVar">fm</span>.</div></p><p>The rectangle <span class="RktVar">x-start</span> <span class="RktVar">y-start</span> <span class="RktVar">x-end</span> <span class="RktVar">y-end</span> is with respect to the <span class="RktVar">fm</span>&rsquo;s <span style="font-style: italic">transformed</span> coordinates.
If given, points in <span class="RktVar">fm</span> are transformed only if their transformed coordinates are within that rectangle.
If not given, <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> uses the rectangle returned by <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span><span class="stt"> </span><span class="RktVar">t</span><span class="stt"> </span><span class="RktSym">w</span><span class="stt"> </span><span class="RktSym">h</span><span class="RktPn">)</span>, where <span class="RktSym">w</span> and <span class="RktSym">h</span> are the size of <span class="RktVar">fm</span>.</p><p><div class="SIntrapara">This transform doubles a flomap&rsquo;s size:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">double-transform</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))" class="RktValLink" pltdoc="x">make-flomap-2d-mapping</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktSym">double-transform</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_177.png" alt="image" width="390" height="98" /></p></td></tr></table></blockquote></div><div class="SIntrapara">Transforms can use the width and height arguments <span class="RktSym">w</span> <span class="RktSym">h</span> however they wish; for example, <span class="RktSym">double-transform</span> ignores them, and <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span> uses them to calculate the center coordinate.</div></p><p><div class="SIntrapara">The <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span> function usually increases the size of a flomap to fit its corners in the result.
To rotate in a way that does not change the size&#8212;<wbr></wbr>i.e. to do an <span style="font-style: italic">in-place</span> rotation&#8212;<wbr></wbr>use <span class="RktVal">0</span> <span class="RktVal">0</span> <span class="RktSym">w</span> <span class="RktSym">h</span> as the transformed rectangle:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">flomap-in-place-rotate</span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span><span class="RktSym">&#952;</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap-size))" class="RktValLink" pltdoc="x">flomap-size</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr></table></blockquote></div><div class="SIntrapara">Using it on <span class="RktSym">text-fm</span> with a purple background:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((quote._~23~25kernel)._define-values))" class="RktStxLink" pltdoc="x">define-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">text-fm-w</span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm-h</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap-size))" class="RktValLink" pltdoc="x">flomap-size</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">purple-text-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Compositing.html#(def._((lib._images/flomap..rkt)._flomap-lt-superimpose))" class="RktValLink" pltdoc="x">flomap-lt-superimpose</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._make-flomap*))" class="RktValLink" pltdoc="x">make-flomap*</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm-w</span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm-h</span><span class="hspace">&nbsp;</span><span class="RktVal">#</span><span class="RktVal">(</span><span class="RktVal">1</span><span class="hspace">&nbsp;</span><span class="RktVal">1/2</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">1</span><span class="RktVal">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">purple-text-fm</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_178.png" alt="image" width="195" height="49" /></p></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">flomap-in-place-rotate</span><span class="hspace">&nbsp;</span><span class="RktSym">purple-text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_179.png" alt="image" width="195" height="49" /></p></td></tr></table></blockquote></div><div class="SIntrapara">See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span> for another example of using <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span>&rsquo;s rectangle arguments, to manually crop a lens projection.</div></p><p><div class="SIntrapara">Alternatively, we could define a new transform-producing function <span class="RktSym">flomap-in-place-rotate-transform</span>
that never transforms points outside of the orginal flomap:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym">flomap-in-place-rotate-transform</span><span class="hspace">&nbsp;</span><span class="RktSym">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/match.html#(form._((lib._racket/match..rkt)._match-define))" class="RktStxLink" pltdoc="x">match-define</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktSym">inv</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt).__))" class="RktStxLink" pltdoc="x">_</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#952;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))" class="RktValLink" pltdoc="x">make-flomap-2d-mapping</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((quote._~23~25kernel)._let-values))" class="RktStxLink" pltdoc="x">let-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3c~3d))" class="RktValLink" pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktSym">w</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">x</span><span class="hspace">&nbsp;</span><span class="RktVal">+nan.0</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/if.html#(form._((quote._~23~25kernel)._if))" class="RktStxLink" pltdoc="x">if</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3c~3d))" class="RktValLink" pltdoc="x">&lt;=</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktSym">h</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">y</span><span class="hspace">&nbsp;</span><span class="RktVal">+nan.0</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">inv</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">purple-text-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">flomap-in-place-rotate-transform</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_179.png" alt="image" width="195" height="49" /></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara">To transform <span class="RktVar">fm</span>, <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> uses only the <span class="RktSym">inv</span> field of <span class="RktPn">(</span><span class="RktVar">t</span><span class="stt"> </span><span class="RktSym">w</span><span class="stt"> </span><span class="RktSym">h</span><span class="RktPn">)</span>.
Every point <span class="RktSym">new-x</span> <span class="RktSym">new-y</span> in the transformed bounds is given the components returned by
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((quote._~23~25kernel)._let-values))" class="RktStxLink" pltdoc="x">let-values</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktPn">(</span><span class="RktSym">old-x</span><span class="hspace">&nbsp;</span><span class="RktSym">old-y</span><span class="RktPn">)</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym">inv</span><span class="hspace">&nbsp;</span><span class="RktSym">new-x</span><span class="hspace">&nbsp;</span><span class="RktSym">new-y</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Struct_Type_and_Accessors.html#(def._((lib._images/flomap..rkt)._flomap-bilinear-ref*))" class="RktValLink" pltdoc="x">flomap-bilinear-ref*</a></span><span class="hspace">&nbsp;</span><span class="RktVar">fm</span><span class="hspace">&nbsp;</span><span class="RktSym">old-x</span><span class="hspace">&nbsp;</span><span class="RktSym">old-y</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">The forward mapping <span class="RktSym">fun</span> is used by <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._images/flomap..rkt)._.Flomap-.Transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Defined as <span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span><span class="stt"> </span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span><span class="stt"> </span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span><span class="RktPn">)</span>.</div></p><p>A value of type <span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span> receives the width and height of a flomap to operate on, and returns a <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span> on the coordinates of flomaps of that size.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._images/flomap..rkt)._flomap-2d-mapping-bounded-by))"></a><a name="(def._((lib._images/flomap..rkt)._flomap-2d-mapping-inv))"></a><a name="(def._((lib._images/flomap..rkt)._flomap-2d-mapping-fun))"></a><a name="(def._((lib._images/flomap..rkt)._flomap-2d-mapping~3f))"></a><a name="(def._((lib._images/flomap..rkt)._struct~3aflomap-2d-mapping))"></a><a name="(def._((lib._images/flomap..rkt)._flomap-2d-mapping))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">fun</span><span class="stt"> </span><span class="RktSym">inv</span><span class="stt"> </span><span class="RktSym">bounded-by</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">inv</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">bounded-by</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._.U))" class="RktStxLink" pltdoc="x">U</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">corners</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">edges</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">all</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Represents an invertible mapping from <span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>&#215;<span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span> to <span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>&#215;<span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span>, or from real-valued flomap coordinates to real-valued flomap coordinates.
See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> for examples.
See <a href="Overview.html#(part._flomap~3aconceptual)" pltdoc="x">Conceptual Model</a> for the meaning of real-valued flomap coordinates.</div></p><p>The forward mapping <span class="RktSym">fun</span> is used to determine the bounds of a transformed flomap.
(See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span> for details.)
The inverse mapping <span class="RktSym">inv</span> is used to actually transform the flomap.
(See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> for details.)</p><p><div class="SIntrapara">The symbol <span class="RktSym">bounded-by</span> tells <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span> how to transform bounds.
In order of efficiency:
</div><div class="SIntrapara"><ul><li><p><span class="RktVal">'</span><span class="RktVal">id</span>: Do not transform bounds.
 Use this for in-place transforms such as <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span>.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">corners</span>: Return the smallest rectangle containing only the transformed corners.
 Use this for linear and affine transforms (such as <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span> or a skew transform),
 transforms that do not produce extreme points, and others for which it can be proved (or at least empirically demonstrated)
 that the rectangle containing the transformed corners contains all the transformed points.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">edges</span>: Return the smallest rectangle containing only the transformed left, top, right, and bottom edges.
 Use this for transforms that are almost-everywhere continuous and invertible&#8212;<wbr></wbr>which describes most interesting transforms.</p></li><li><p><span class="RktVal">'</span><span class="RktVal">all</span>: Return the smallest rectangle containing all the transformed points.
 Use this for transforms that produce overlaps and other non-invertible results.</p></li></ul></div></p><p>For good performance, define instances of <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span> and functions that return them (e.g. instances of <span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span>), in Typed Racket.
Defining them in untyped Racket makes every application of <span class="RktSym">fun</span> and <span class="RktSym">inv</span> contract-checked when used in typed code, such as the implementation of <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span>.
(In the worst case, <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> applies <span class="RktSym">fun</span> to every pair of coordinates in the input flomap.
It always applies <span class="RktSym">inv</span> to every pair of coordinates in the output flomap.)</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._make-flomap-2d-mapping))" class="RktValLink" pltdoc="x">make-flomap-2d-mapping</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">fun</span><span class="hspace">&nbsp;</span><span class="RktVar">inv</span><span class="hspace">&nbsp;</span>[<span class="RktVar">bounded-by</span>]<span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">fun</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">inv</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/values.html#(def._((quote._~23~25kernel)._values))" class="RktValLink" pltdoc="x">values</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">bounded-by</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types-extra..rkt)._.U))" class="RktStxLink" pltdoc="x">U</a></span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">id</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">corners</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">edges</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">all</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>=<span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">edges</span></td></tr></table></blockquote></div><div class="SIntrapara">A more permissive, more convenient constructor for <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span>.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-transform-compose))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span><span class="RktVar">t1</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t2</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t1</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Composes two flomap transforms.
Applying the result of <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span><span class="stt"> </span><span class="RktVar">t2</span><span class="stt"> </span><span class="RktVar">t1</span><span class="RktPn">)</span> is the same as applying <span class="RktVar">t1</span> and then <span class="RktVar">t2</span>, <span style="font-weight: bold">except</span>:
</div><div class="SIntrapara"><ul><li><p>The points are transformed only once, meaning their component values are estimated only once, so the result is less degraded (blurry or aliased).</p></li><li><p>The bounds are generally tighter.</p></li></ul></div></p><p><div class="SIntrapara">The following example &ldquo;whirls&rdquo; <span class="RktSym">text-fm</span> clockwise 360 degrees and back.
This is first done by applying the two transforms separately, and secondly by applying a composition of them.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let*))" class="RktStxLink" pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_180.png" alt="image" width="195" height="49" /></p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-2</span></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-whirl-transform))" class="RktValLink" pltdoc="x">flomap-whirl-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">2</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_168.png" alt="image" width="195" height="49" /></p></td></tr></table></blockquote></div><div class="SIntrapara">Notice the heavy aliasing (a &ldquo;Moir&#233; pattern&rdquo;) in the first result is not in the second.</div></p><p><div class="SIntrapara">In the next example, notice that rotating multiple times blurs the result and pads it with transparent points, but that applying composed rotation transforms doesn&rsquo;t:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/let.html#(form._((lib._racket/private/letstx-scheme..rkt)._let*))" class="RktStxLink" pltdoc="x">let*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">[</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate))" class="RktValLink" pltdoc="x">flomap-rotate</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_181.png" alt="image" width="361" height="349" /></p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">rotate-pi/2</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/for.html#(form._((lib._racket/private/base..rkt)._for/fold))" class="RktStxLink" pltdoc="x">for/fold</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="../slideshow/Primary_Slide_Functions.html#(def._((lib._slideshow/base..rkt)._t))" class="RktValLink" pltdoc="x">t</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-id-transform))" class="RktValLink" pltdoc="x">flomap-id-transform</a></span><span class="RktPn">]</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktPn">[</span><span class="RktSym"><a href="../reference/stx-patterns.html#(form._((lib._racket/private/stxcase-scheme..rkt).__))" class="RktStxLink" pltdoc="x">_</a></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/sequences.html#(def._((lib._racket/private/base..rkt)._in-range))" class="RktValLink" pltdoc="x">in-range</a></span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="RktPn">)</span><span class="RktPn">]</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">1/8</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._pi))" class="RktValLink" pltdoc="x">pi</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../slideshow/Primary_Slide_Functions.html#(def._((lib._slideshow/base..rkt)._t))" class="RktValLink" pltdoc="x">t</a></span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span><span class="hspace">&nbsp;</span><span class="RktSym">text-fm</span><span class="hspace">&nbsp;</span><span class="RktSym">rotate-pi/2</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_172.png" alt="image" width="49" height="195" /></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara">How the bounds for the composed transform are calculated depends on how they would have been calculated for <span class="RktVar">t1</span> and <span class="RktVar">t2</span>.
Suppose <span class="RktSym">b1</span> is the bounds rule for <span class="RktPn">(</span><span class="RktVar">t1</span><span class="stt"> </span><span class="RktSym">w</span><span class="stt"> </span><span class="RktSym">h</span><span class="RktPn">)</span> and <span class="RktSym">b2</span> is the bounds rule for <span class="RktPn">(</span><span class="RktVar">t2</span><span class="stt"> </span><span class="RktSym">w</span><span class="stt"> </span><span class="RktSym">h</span><span class="RktPn">)</span>.
Then the bounds rule <span class="RktSym">b</span> for <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-compose))" class="RktValLink" pltdoc="x">flomap-transform-compose</a></span><span class="stt"> </span><span class="RktVar">t2</span><span class="stt"> </span><span class="RktVar">t1</span><span class="RktPn">)</span> is determined by the following rules, applied in order:
</div><div class="SIntrapara"><ul><li><p>If either <span class="RktSym">b1</span> = <span class="RktVal">'</span><span class="RktVal">all</span> or <span class="RktSym">b2</span> = <span class="RktVal">'</span><span class="RktVal">all</span>, then <span class="RktSym">b</span> = <span class="RktVal">'</span><span class="RktVal">all</span>.</p></li><li><p>If either <span class="RktSym">b1</span> = <span class="RktVal">'</span><span class="RktVal">edges</span> or <span class="RktSym">b2</span> = <span class="RktVal">'</span><span class="RktVal">edges</span>, then <span class="RktSym">b</span> = <span class="RktVal">'</span><span class="RktVal">edges</span>.</p></li><li><p>If either <span class="RktSym">b1</span> = <span class="RktVal">'</span><span class="RktVal">corners</span> or <span class="RktSym">b2</span> = <span class="RktVal">'</span><span class="RktVal">corners</span>, then <span class="RktSym">b</span> = <span class="RktVal">'</span><span class="RktVal">corners</span>.</p></li><li><p>Otherwise, <span class="RktSym">b1</span> = <span class="RktSym">b2</span> = <span class="RktVal">'</span><span class="RktVal">id</span>, so <span class="RktSym">b</span> = <span class="RktVal">'</span><span class="RktVal">id</span>.</p></li></ul></div><div class="SIntrapara">See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span> for details on how <span class="RktSym">b</span> affects bounds calculation.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-transform-bounds))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span><span class="RktVar">h</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><table cellspacing="0"><tr><td><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr></table></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">t</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">w</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">h</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Integer))" class="RktStxLink" pltdoc="x">Integer</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns the rectangle that would contain a <span class="RktVar">w</span>&#215;<span class="RktVar">h</span> flomap after transform by <span class="RktVar">t</span>.</div></p><p>How the rectangle is determined depends on the <span class="RktSym">bounded-by</span> field of <span class="RktPn">(</span><span class="RktVar">t</span><span class="stt"> </span><span class="RktVar">w</span><span class="stt"> </span><span class="RktVar">h</span><span class="RktPn">)</span>.
See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-2d-mapping))" class="RktValLink" pltdoc="x">flomap-2d-mapping</a></span> for details.</p><p>See <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-rotate-transform))" class="RktValLink" pltdoc="x">flomap-rotate-transform</a></span> and <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span> for examples.</p><h5>4.10.3<tt>&nbsp;</tt><a name="(part._.Lens_.Projection_and_.Correction)"></a>Lens Projection and Correction</h5><p>The following API demonstrates a parameterized family of spatial transforms.
It also provides a physically grounded generalization of the flomap transforms returned by <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-fisheye-transform))" class="RktValLink" pltdoc="x">flomap-fisheye-transform</a></span>.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><table cellspacing="0" class="prototype RForeground"><tr><td><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._flomap-projection-transform))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span></span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">to-proj</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">from-proj</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td></tr><tr><td><span class="hspace">&nbsp;</span></td><td><span class="hspace">&nbsp;</span></td><td><span class="RktVar">crop?</span><span class="RktPn">)</span></td><td><span class="hspace">&nbsp;</span></td><td>&rarr;</td><td><span class="hspace">&nbsp;</span></td><td><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Flomap-.Transform))" class="RktStxLink" pltdoc="x">Flomap-Transform</a></span></td></tr></table></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">to-proj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">from-proj</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">crop?</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Boolean))" class="RktStxLink" pltdoc="x">Boolean</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Returns a flomap transform that corrects for or simulates lens distortion.</div></p><p><div class="SIntrapara">To correct for lens distortion in a flomap:
</div><div class="SIntrapara"><ul><li><p>Find a projection <span class="RktVar">from-proj</span> that models the actual lens.</p></li><li><p>Find a projection <span class="RktVar">to-proj</span> that models the desired (but fictional) lens.</p></li><li><p>Apply <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span><span class="stt"> </span><span class="RktVar">to-proj</span><span class="stt"> </span><span class="RktVar">from-proj</span><span class="RktPn">)</span> to the flomap.</p></li></ul></div></p><p><div class="SIntrapara"><span class="refelem"><span class="refcolumn"><span class="refcontent">This photo is in the public domain.</span></span></span>
In the following example, a photo of the State of the Union address was taken using an &ldquo;equal area&rdquo; (or &ldquo;equisolid angle&rdquo;) fisheye lens with a 180-degree diagonal angle of view:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">state-of-the-union-fm</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_182.png" alt="image" width="500" height="333" /></p></td></tr></table></blockquote></div><div class="SIntrapara">We would like it to have been taken with a perfect &ldquo;rectilinear&rdquo; (or &ldquo;perspective projection&rdquo;) lens with a 120-degree diagonal angle of view.
Following the steps above, we apply a projection transform using <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="RktValLink" pltdoc="x">equal-area-projection</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="stt"> </span><span class="RktVal">180</span><span class="RktPn">)</span><span class="RktPn">)</span> for <span class="RktVar">from-proj</span> and <span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="stt"> </span><span class="RktVal">120</span><span class="RktPn">)</span><span class="RktPn">)</span> for <span class="RktVar">to-proj</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">state-of-the-union-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">120</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="RktValLink" pltdoc="x">equal-area-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">180</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_183.png" alt="image" width="494" height="327" /></p></td></tr></table></blockquote></div><div class="SIntrapara">Notice that the straight geometry in the House chamber (especially the trim around the ceiling) is represented by straight edges in the corrected photo.</div></p><p><div class="SIntrapara">When <span class="RktVar">crop?</span> is <span class="RktVal">#t</span>, the output flomap is no larger than the input flomap.
When <span class="RktVar">crop?</span> is <span class="RktVal">#f</span>, the output flomap is large enough to contain the entire transformed flomap.
An uncropped result can be quite large, especially with angles of view at or near <span class="RktVal">180</span> degrees.
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">rectangle-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._draw-flomap))" class="RktValLink" pltdoc="x">draw-flomap</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">fm-dc</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" class="RktStxLink" pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm-dc</span><span class="hspace">&nbsp;</span><span class="RktSym">set-pen</span><span class="hspace">&nbsp;</span><span class="RktVal">"black"</span><span class="hspace">&nbsp;</span><span class="RktVal">4</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">dot</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" class="RktStxLink" pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm-dc</span><span class="hspace">&nbsp;</span><span class="RktSym">set-brush</span><span class="hspace">&nbsp;</span><span class="RktVal">"yellow"</span><span class="hspace">&nbsp;</span><span class="RktVal">'</span><span class="RktVal">solid</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" class="RktStxLink" pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm-dc</span><span class="hspace">&nbsp;</span><span class="RktSym">set-alpha</span><span class="hspace">&nbsp;</span><span class="RktVal">1/2</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/ivaraccess.html#(form._((lib._racket/private/class-internal..rkt)._send))" class="RktStxLink" pltdoc="x">send</a></span><span class="hspace">&nbsp;</span><span class="RktSym">fm-dc</span><span class="hspace">&nbsp;</span><span class="RktSym">draw-rectangle</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">0</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktVal">32</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td></td></tr></table></td></tr><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span><span class="hspace">&nbsp;</span><span class="RktSym">rectangle-fm</span><span class="RktPn">)</span></td></tr><tr><td><p><img src="pict_184.png" alt="image" width="32" height="32" /></p></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform-bounds))" class="RktValLink" pltdoc="x">flomap-transform-bounds</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="RktValLink" pltdoc="x">equal-area-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">180</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="hspace">&nbsp;</span><span class="RktVal">32</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><table cellspacing="0"><tr><td><p><span class="RktRes">-56481829139474512</span></p></td></tr><tr><td><p><span class="RktRes">-56481829139474520</span></p></td></tr><tr><td><p><span class="RktRes">56481829139474552</span></p></td></tr><tr><td><p><span class="RktRes">56481829139474552</span></p></td></tr></table></td></tr><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">rectangle-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._orthographic-projection))" class="RktValLink" pltdoc="x">orthographic-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">160</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_185.png" alt="image" width="182" height="182" /></p></td></tr></table></blockquote></div><div class="SIntrapara">To crop manually, apply <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span> to explicit rectangle arguments:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><table cellspacing="0" class="RktBlk"><tr><td><span class="stt">&gt; </span><span class="RktPn">(</span><span class="RktSym"><a href="Conversion_and_Construction.html#(def._((lib._images/flomap..rkt)._flomap-~3ebitmap))" class="RktValLink" pltdoc="x">flomap-&gt;bitmap</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-transform))" class="RktValLink" pltdoc="x">flomap-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">rectangle-fm</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._flomap-projection-transform))" class="RktValLink" pltdoc="x">flomap-projection-transform</a></span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">90</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._orthographic-projection))" class="RktValLink" pltdoc="x">orthographic-projection</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((lib._racket/math..rkt)._degrees-~3eradians))" class="RktValLink" pltdoc="x">degrees-&gt;radians</a></span><span class="hspace">&nbsp;</span><span class="RktVal">160</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;&nbsp;</span><span class="RktVal">#f</span><span class="RktPn">)</span></td></tr><tr><td><span class="RktPlain"><span class="hspace">&nbsp;&nbsp;</span></span><span class="hspace">&nbsp;&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>0</span><span class="hspace">&nbsp;</span><span class="RktVal"><span class="nobreak">-1</span>0</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="hspace">&nbsp;</span><span class="RktVal">42</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></td></tr><tr><td><p><img src="pict_186.png" alt="image" width="52" height="52" /></p></td></tr></table></blockquote></div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._perspective-projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._linear-projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._linear-projection))" class="RktValLink" pltdoc="x">linear-projection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._orthographic-projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._orthographic-projection))" class="RktValLink" pltdoc="x">orthographic-projection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._equal-area-projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._equal-area-projection))" class="RktValLink" pltdoc="x">equal-area-projection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>procedure</p></div></div><p class="RForeground"><span class="RktPn">(</span><a name="(def._((lib._images/flomap..rkt)._stereographic-projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._stereographic-projection))" class="RktValLink" pltdoc="x">stereographic-projection</a></span></span><span class="hspace">&nbsp;</span><span class="RktVar">&#945;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span>&rarr;<span class="hspace">&nbsp;</span><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktVar">&#945;</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Real))" class="RktStxLink" pltdoc="x">Real</a></span></td></tr></table></blockquote></div><div class="SIntrapara">Given a diagonal angle of view <span class="RktVar">&#945;</span>, these all return a projection modeling some kind of camera lens.
See <a href="http://en.wikipedia.org/wiki/Fisheye_lens">Fisheye Lens</a> for the defining formulas.</div></p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>syntax</p></div></div><p class="RForeground"><a name="(form._((lib._images/flomap..rkt)._.Projection))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span></span></p></blockquote></td></tr></table></blockquote></div><div class="SIntrapara">Equivalent to <span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="stt"> </span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="stt"> </span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._projection-mapping))" class="RktValLink" pltdoc="x">projection-mapping</a></span><span class="RktPn">)</span>.</div></p><p>A value of type <span class="RktSym"><a href="#(form._((lib._images/flomap..rkt)._.Projection))" class="RktStxLink" pltdoc="x">Projection</a></span> receives the diagonal size of a flomap to operate on, and returns a <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._projection-mapping))" class="RktValLink" pltdoc="x">projection-mapping</a></span> instance.
The provided projections (such as <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span>) use a closed-over diagonal angle of view <span class="RktSym">&#945;</span> and the diagonal size to calculate the focal length.</p><p><div class="SIntrapara"><blockquote class="SVInsetFlow"><table cellspacing="0" class="boxed RBoxed"><tr><td><blockquote class="SubFlow"><div class="RBackgroundLabel SIEHidden"><div class="RBackgroundLabelInner"><p>struct</p></div></div><p class="RForeground"><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define-struct.html#(form._((lib._racket/private/base..rkt)._struct))" class="RktStxLink" pltdoc="x">struct</a></span><span class="stt"> </span><a name="(def._((lib._images/flomap..rkt)._projection-mapping-inv))"></a><a name="(def._((lib._images/flomap..rkt)._projection-mapping-fun))"></a><a name="(def._((lib._images/flomap..rkt)._projection-mapping~3f))"></a><a name="(def._((lib._images/flomap..rkt)._struct~3aprojection-mapping))"></a><a name="(def._((lib._images/flomap..rkt)._projection-mapping))"></a><span title="Provided from: images/flomap"><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._projection-mapping))" class="RktValLink" pltdoc="x">projection-mapping</a></span></span><span class="stt"> </span><span class="RktPn">(</span><span class="RktSym">fun</span><span class="stt"> </span><span class="RktSym">inv</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">fun</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;</span><span class="RktSym">inv</span><span class="hspace">&nbsp;</span>:<span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../reference/function-contracts.html#(form._((lib._racket/contract/base..rkt)._-~3e))" class="RktStxLink" pltdoc="x"><span class="nobreak">-&gt;</span></a></span><span class="hspace">&nbsp;</span><span class="RktSym"><a href="../ts-reference/type-ref.html#(form._((lib._typed-racket/base-env/base-types..rkt)._.Float))" class="RktStxLink" pltdoc="x">Float</a></span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">Represents an invertible function from a point&rsquo;s angle <span class="RktSym">&#961;</span> from the optical axis, to the distance <span class="RktSym">r</span> to the center of a photo, in flomap coordinates.</div></p><p><div class="SIntrapara">For example, given a diagonal angle of view <span class="RktSym">&#945;</span> and the diagonal size <span class="RktSym">d</span> of a flomap, the <span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._perspective-projection))" class="RktValLink" pltdoc="x">perspective-projection</a></span> function calculates the focal length <span class="RktSym">f</span>:
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><p><span class="RktPn">(</span><span class="RktSym"><a href="../reference/define.html#(form._((lib._racket/private/base..rkt)._define))" class="RktStxLink" pltdoc="x">define</a></span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">d</span><span class="hspace">&nbsp;</span><span class="RktVal">2.0</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._tan))" class="RktValLink" pltdoc="x">tan</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktVal">0.5</span><span class="hspace">&nbsp;</span><span class="RktSym">&#945;</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></p></blockquote></div><div class="SIntrapara">It then constructs the projection mapping as
</div><div class="SIntrapara"><blockquote class="SCodeFlow"><table cellspacing="0" class="RktBlk"><tr><td><span class="RktPn">(</span><span class="RktSym"><a href="#(def._((lib._images/flomap..rkt)._projection-mapping))" class="RktValLink" pltdoc="x">projection-mapping</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">&#961;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._*))" class="RktValLink" pltdoc="x">*</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._tan))" class="RktValLink" pltdoc="x">tan</a></span><span class="hspace">&nbsp;</span><span class="RktSym">&#961;</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr><tr><td><span class="hspace">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" class="RktStxLink" pltdoc="x">&#955;</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym">r</span><span class="RktPn">)</span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._atan))" class="RktValLink" pltdoc="x">atan</a></span><span class="hspace">&nbsp;</span><span class="RktPn">(</span><span class="RktSym"><a href="../reference/generic-numbers.html#(def._((quote._~23~25kernel)._/))" class="RktValLink" pltdoc="x">/</a></span><span class="hspace">&nbsp;</span><span class="RktSym">r</span><span class="hspace">&nbsp;</span><span class="RktSym">f</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span><span class="RktPn">)</span></td></tr></table></blockquote></div><div class="SIntrapara">See <a href="http://en.wikipedia.org/wiki/Fisheye_lens">Fisheye Lens</a> for details.</div></p><div class="navsetbottom"><span class="navleft"><form class="searchform"><input class="searchbox" style="color: #888;" type="text" value="...search manuals..." title="Enter a search string to search the manuals" onkeypress="return DoSearchKey(event, this, &quot;5.3&quot;, &quot;../&quot;);" onfocus="this.style.color=&quot;black&quot;; this.style.textAlign=&quot;left&quot;; if (this.value == &quot;...search manuals...&quot;) this.value=&quot;&quot;;" onblur="if (this.value.match(/^ *$/)) { this.style.color=&quot;#888&quot;; this.style.textAlign=&quot;center&quot;; this.value=&quot;...search manuals...&quot;; }" /></form>&nbsp;&nbsp;<a href="../index.html" title="up to the documentation top" pltdoc="x" onclick="return GotoPLTRoot(&quot;5.3&quot;);">top</a></span><span class="navright"><a href="Compositing.html" title="backward to &quot;4.9 Compositing&quot;" pltdoc="x">&larr; prev</a>&nbsp;&nbsp;<a href="flomap_title.html" title="up to &quot;4 Floating-Point Bitmaps&quot;" pltdoc="x">up</a>&nbsp;&nbsp;<a href="Effects.html" title="forward to &quot;4.11 Effects&quot;" pltdoc="x">next &rarr;</a></span>&nbsp;</div></div></div><div id="contextindicator">&nbsp;</div></body></html>